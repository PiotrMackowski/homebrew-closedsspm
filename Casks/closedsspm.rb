# This file was generated by GoReleaser. DO NOT EDIT.
cask "closedsspm" do
  name "closedsspm"
  desc "Open Source SaaS Security Posture Management â€” audit SaaS platforms for security misconfigurations."
  homepage "https://github.com/PiotrMackowski/ClosedSSPM"
  version "0.2.1"

  livecheck do
    skip "Auto-generated on release."
  end

  binary "closedsspm"
  binary "closedsspm-mcp"

  on_macos do
    on_intel do
      url "https://github.com/PiotrMackowski/ClosedSSPM/releases/download/v#{version}/closedsspm_#{version}_darwin_amd64.tar.gz"
      sha256 "4448e2ba1327b71d86a77f0f579ce8f71bcb17f25c00d1456ceef2762d6d146c"
    end
    on_arm do
      url "https://github.com/PiotrMackowski/ClosedSSPM/releases/download/v#{version}/closedsspm_#{version}_darwin_arm64.tar.gz"
      sha256 "65f9632b44a01da45682efe546e8275ef055e456e246266a7fc3b5cf62806070"
    end
  end

  on_linux do
    on_intel do
      url "https://github.com/PiotrMackowski/ClosedSSPM/releases/download/v#{version}/closedsspm_#{version}_linux_amd64.tar.gz"
      sha256 "310e8b22422e2a1511a9e10a6ecd3a2625a2ac03b79a8dcca562420a4c4654ee"
    end
    on_arm do
      url "https://github.com/PiotrMackowski/ClosedSSPM/releases/download/v#{version}/closedsspm_#{version}_linux_arm64.tar.gz"
      sha256 "a9f0dd72f865845cdc9511988cf9bf36736ee645a7feff12c0496418d8418f3a"
    end
  end

  postflight do
    if OS.mac?
      system_command "/usr/bin/xattr", args: ["-dr", "com.apple.quarantine", "#{staged_path}/closedsspm"]
      system_command "/usr/bin/xattr", args: ["-dr", "com.apple.quarantine", "#{staged_path}/closedsspm-mcp"]
    end
  end

  # No zap stanza required
end
